
> aetherial-vanguard@0.1.0 test
> tsx tests/run_tests.ts

Running Engine Tests...

[2025-12-01T02:38:54.893Z] [INFO] [ECS] WorldManager initialized 
âœ“ WorldManager - Create entity
[2025-12-01T02:38:54.894Z] [INFO] [ECS] WorldManager initialized 
âœ“ WorldManager - Add component
[2025-12-01T02:38:54.894Z] [INFO] [ECS] WorldManager initialized 
âœ“ WorldManager - Query entities
[2025-12-01T02:38:54.894Z] [INFO] [ECS] WorldManager initialized 
âœ“ WorldManager - Remove component
[2025-12-01T02:38:54.895Z] [INFO] [ECS] WorldManager initialized 
âœ“ WorldManager - Destroy entity
[2025-12-01T02:38:54.895Z] [INFO] [ECS] WorldManager initialized 
âœ“ WorldManager - Component subscription
[2025-12-01T02:38:54.895Z] [INFO] [CORE] GameLoop initialized with 0.016666666666666666s fixed timestep 
âœ“ GameLoop - Initialization
[2025-12-01T02:38:54.895Z] [INFO] [CORE] GameLoop initialized with 0.016666666666666666s fixed timestep 
[2025-12-01T02:38:54.895Z] [INFO] [CORE] GameLoop started 
[2025-12-01T02:38:54.896Z] [INFO] [CORE] GameLoop stopped 
âœ“ GameLoop - Start and stop
[2025-12-01T02:38:54.896Z] [INFO] [CORE] GameLoop initialized with 0.016666666666666666s fixed timestep 
[2025-12-01T02:38:54.896Z] [INFO] [CORE] GameLoop started 
âœ“ GameLoop - Pause functionality
âœ“ GlobalLogger - Basic logging
[2025-12-01T02:38:54.896Z] [WARN] [CORE] Warning message 
âœ“ GlobalLogger - Log levels
âœ“ GlobalLogger - Configuration
[2025-12-01T02:38:54.896Z] [WARN] [UI] Warning message 
[2025-12-01T02:38:54.896Z] [ERROR] [RENDERER] Error message 
âœ— GlobalLogger - Log statistics
  Error: Error: Should have 3 total log entries. Expected: 3, Actual: 2
âœ“ Integration - World and Game Loop
âœ— Integration - Logger and World
  Error: Error: World operations should be logged

Test Results: 13 passed, 2 failed
Running Utility Tests...

âœ“ RNG - Basic functionality
âœ“ RNG - Seeded reproducibility
âœ“ RNG - Random integer
âœ“ RNG - Random choice
âœ“ rollDice - Standard dice
âœ“ rollPercent - Percentage chance
âœ— weightedRandom - Weighted selection
  Error: Error: Rare items should be less common than common items
âœ“ MathUtils - Clamp
âœ“ MathUtils - Lerp
âœ“ MathUtils - Distance
âœ“ MathUtils - Point in rect
âœ“ Vector2Utils - Basic operations
âœ“ Vector2Utils - Magnitude and normalization
âœ“ Vector2Utils - Distance
âœ“ Pathfinding - Simple path
âœ“ Pathfinding - No path
âœ“ SimplePathfinding - Straight path
âœ“ ValidationUtils - Basic validation
âœ“ ItemValidator - Valid item
âœ“ ItemValidator - Invalid item
âœ“ EnemyValidator - Valid enemy
âœ“ EnemyValidator - Invalid enemy

Test Results: 21 passed, 1 failed
Running Save System Tests...

âœ“ SaveSystem - Initialization
âœ“ SaveSystem - World manager assignment
[2025-12-01T02:38:54.925Z] [WARN] [CORE] Invalid player data in save file 
[2025-12-01T02:38:54.925Z] [ERROR] [CORE] Save data validation failed 
âœ— SaveSystem - Save game to slot
  Error: Error: Save should succeed
[2025-12-01T02:38:54.925Z] [ERROR] [CORE] Invalid save slot: 11 
âœ“ SaveSystem - Save to invalid slot
[2025-12-01T02:38:54.925Z] [ERROR] [CORE] World manager not set for save operation 
âœ“ SaveSystem - Save without world
[2025-12-01T02:38:54.926Z] [WARN] [CORE] Invalid player data in save file 
[2025-12-01T02:38:54.926Z] [ERROR] [CORE] Save data validation failed 
âœ— SaveSystem - Load game from slot
  Error: Error: Save should succeed
[2025-12-01T02:38:54.926Z] [ERROR] [CORE] Invalid save slot: 11 
âœ“ SaveSystem - Load from invalid slot
[2025-12-01T02:38:54.926Z] [WARN] [CORE] No save data found in slot 9 
âœ“ SaveSystem - Load non-existent save
âœ“ SaveSystem - Get save slots
[2025-12-01T02:38:54.926Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Check save exists
  Error: Error: Slot 3 should exist after save
[2025-12-01T02:38:54.927Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Delete save
  Error: Error: Slot 5 should exist after save
[2025-12-01T02:38:54.927Z] [ERROR] [CORE] Invalid save slot: 11 
âœ“ SaveSystem - Delete from invalid slot
[2025-12-01T02:38:54.944Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Auto-save
  Error: Error: Auto-save should succeed
[2025-12-01T02:38:54.945Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
[2025-12-01T02:38:54.945Z] [WARN] [CORE] No save data to export in slot 6 
âœ— SaveSystem - Export save
  Error: Error: Export should succeed
âœ“ SaveSystem - Import save
[2025-12-01T02:38:54.946Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Validate save data structure
  Error: Error: Save with complete data should succeed
[2025-12-01T02:38:54.946Z] [WARN] [CORE] No save data found in slot 1 
âœ“ SaveSystem - Handle corrupted save data
[2025-12-01T02:38:54.946Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ“ SaveSystem - Handle storage quota exceeded
[2025-12-01T02:38:54.946Z] [WARN] [CORE] No save data found in slot 1 
âœ— SaveSystem - Version migration
  Error: Error: Migration should succeed

Save System Test Results: 11 passed, 8 failed
Running Camera System Tests...

âœ“ CameraSystem - Initialization
âœ“ CameraSystem - World manager assignment
âœ“ CameraSystem - Viewport setup
âœ— CameraSystem - Instant follow mode
  Error: Error: Instant follow should immediately match target X. Expected: 100, Actual: 400
âœ— CameraSystem - Smooth follow mode
  Error: Error: Smooth follow should move toward target X
âœ“ CameraSystem - Lookahead follow mode
âœ— CameraSystem - Elastic follow mode
  Error: Error: Elastic follow should show spring behavior
âœ“ CameraSystem - Dead zone
âœ“ CameraSystem - Set boundaries
âœ— CameraSystem - Enforce boundaries
  Error: Error: X should be clamped to minimum boundary. Expected: 100, Actual: 500
âœ— CameraSystem - Disable boundaries
  Error: Error: Position should not be clamped when boundaries disabled. Expected: 10000, Actual: 0
âœ— CameraSystem - World to screen coordinates
  Error: Error: World X should map to screen X correctly. Expected: 500, Actual: 0
âœ— CameraSystem - Screen to world coordinates
  Error: Error: Screen X should map to world X correctly. Expected: 500, Actual: 0
âœ— CameraSystem - Coordinate conversion with zoom
  Error: Error: World X should be scaled by zoom. Expected: 600, Actual: 0
âœ— CameraSystem - Point visibility
  Error: Error: Center point should be visible
âœ— CameraSystem - Visibility with margin
  Error: Error: Point just outside should be visible with margin
âœ— CameraSystem - Camera shake
  Error: Error: Position should return to original after shake. Expected: 400, Actual: 0
âœ— CameraSystem - Camera transition
  Error: Error: X should be between start and end
âœ— CameraSystem - Zoom limits
  Error: Error: Zoom should be clamped to minimum. Expected: 0.1, Actual: 1
âœ— CameraSystem - Get camera bounds
  Error: Error: Bounds width should match viewport. Expected: 800, Actual: 0
âœ— CameraSystem - Bounds with zoom
  Error: Error: Bounds width should be viewport divided by zoom. Expected: 400, Actual: 0
âœ— CameraSystem - Reset camera
  Error: Error: X should reset to viewport center. Expected: 400, Actual: 0

Camera System Test Results: 6 passed, 16 failed
Running Interaction System Tests...

âœ“ InteractionSystem - Initialization
âœ“ InteractionSystem - World manager assignment
âœ“ InteractionSystem - Player assignment
âœ“ InteractionSystem - Create interactive entity
âœ“ InteractionSystem - Always condition
âœ“ InteractionSystem - Item requirement condition
âœ“ InteractionSystem - Story flag condition
âœ“ InteractionSystem - Level requirement condition
âœ— InteractionSystem - Negated conditions
  Error: Error: Negated condition should pass when item not present
âœ“ InteractionSystem - Range multiplier
âœ“ InteractionSystem - Priority calculation
âœ“ InteractionSystem - Single use interactions
âœ— InteractionSystem - Inventory management
  Error: Error: Should still have one item
âœ“ InteractionSystem - Story flag management
âœ“ InteractionSystem - Player level management
âœ“ InteractionSystem - Interaction execution

Interaction System Test Results: 14 passed, 2 failed
Running Accessibility System Tests...

âœ“ AccessibilitySystem - Initialization
âœ“ AccessibilitySystem - Default options
âœ“ AccessibilitySystem - Update options
âœ“ AccessibilitySystem - Screen reader enable/disable
âœ“ AccessibilitySystem - Text-to-speech
âœ“ AccessibilitySystem - Show subtitles
âœ“ AccessibilitySystem - Subtitle size
âœ“ AccessibilitySystem - Audio visual indicators
âœ“ AccessibilitySystem - Color blind modes
âœ“ AccessibilitySystem - High contrast mode
âœ“ AccessibilitySystem - Large text mode
âœ“ AccessibilitySystem - Reduced motion
âœ“ AccessibilitySystem - Input assistance
âœ“ AccessibilitySystem - Input processing
âœ“ AccessibilitySystem - Keyboard navigation
âœ“ AccessibilitySystem - Focus trap
âœ“ AccessibilitySystem - Settings persistence

Accessibility System Test Results: 17 passed, 0 failed
Running Debug Tools System Tests...

âœ“ DebugToolsSystem - Initialization
âœ“ DebugToolsSystem - World manager assignment
âœ“ DebugToolsSystem - Player assignment
âœ— DebugToolsSystem - Default configuration
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ“ DebugToolsSystem - Update configuration
âœ— DebugToolsSystem - Toggle features
  Error: Error: Hitboxes should be toggled on initially
âœ— DebugToolsSystem - Spawn entity
  Error: Error: Spawned entity should exist in world
âœ— DebugToolsSystem - Spawn invalid entity
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Warp to location
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Warp to invalid location
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Inspect entity
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Inspect invalid entity
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Help command
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Spawn command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Warp command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Heal command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Give command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Clear command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Reset command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Invalid command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Performance metrics update
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Overlay position
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Spawn entities initialization
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Warp locations initialization
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Debug canvas creation
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ“ DebugToolsSystem - Keyboard shortcuts setup

Debug Tools System Test Results: 5 passed, 21 failed
Running Component Tests...

Rendering component with test-id: default
âœ— Game Component - Renders without crashing
  Error: Error: Element with test-id "game" should exist
Rendering component with test-id: default
âœ— Game Component - Has correct accessibility attributes
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
âœ— Game Component - Handles keyboard events
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
âœ— Game Component - Responsive design
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
âœ— HUD Component - Renders health display
  Error: Error: Element with test-id "hud" should exist
Rendering component with test-id: default
âœ— HUD Component - Updates when health changes
  Error: Error: Element with test-id "hud" not found
Rendering component with test-id: default
âœ— HUD Component - Shows debug info when enabled
  Error: Error: Element with test-id "hud" not found
Rendering component with test-id: default
âœ— HUD Component - Accessibility compliance
  Error: Error: Element with test-id "hud" not found
Rendering component with test-id: default
âœ— Dialog System - Renders dialog text
  Error: Error: Element with test-id "dialog" should exist
Rendering component with test-id: default
âœ— Dialog System - Handles dialog navigation
  Error: Error: Element with test-id "dialog" not found
Rendering component with test-id: default
âœ— Dialog System - Supports auto-advance
  Error: Error: Element with test-id "dialog" not found
Rendering component with test-id: default
âœ— Dialog System - Accessibility features
  Error: Error: Element with test-id "dialog" not found
Rendering component with test-id: default
âœ— Menu System - Renders menu items
  Error: Error: Element with test-id "menu" should exist
Rendering component with test-id: default
âœ— Menu System - Handles menu navigation
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
âœ— Menu System - Supports mouse/touch interaction
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
âœ— Menu System - Keyboard accessibility
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
âœ— Inventory System - Displays items
  Error: Error: Element with test-id "inventory" should exist
Rendering component with test-id: default
âœ— Inventory System - Handles item selection
  Error: Error: Element with test-id "inventory" not found
Rendering component with test-id: default
âœ— Inventory System - Supports item management
  Error: Error: Element with test-id "inventory" not found
Rendering component with test-id: default
âœ— Inventory System - Accessibility compliance
  Error: Error: Element with test-id "inventory" not found
Rendering component with test-id: default
âœ— Combat UI - Renders combat interface
  Error: Error: Element with test-id "combat" should exist
Rendering component with test-id: default
âœ— Combat UI - Displays participant information
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ— Combat UI - Handles action selection
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ— Combat UI - Shows combat log
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ— Combat UI - Accessibility features
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ“ Error Boundary - Catches component errors
Rendering component with test-id: default
âœ“ Error Boundary - Shows error message
Rendering component with test-id: default
âœ“ Error Boundary - Provides fallback UI
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Responsive Design - Mobile viewport
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Responsive Design - Tablet viewport
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Responsive Design - Desktop viewport
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ— Accessibility - Screen reader support
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
Rendering component with test-id: default
âœ— Accessibility - Keyboard navigation
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Accessibility - High contrast mode
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Accessibility - Reduced motion

Component Test Results: 8 passed, 27 failed
Running Integration Tests...

Running Performance Tests...

âœ“ WorldManager - Entity creation performance
âœ— WorldManager - Component addition performance
  Error: ReferenceError: i is not defined
âœ“ WorldManager - Query performance
âœ“ WorldManager - Memory efficiency
âœ“ GameLoop - High FPS performance
âœ“ GameLoop - Delta time accuracy
âœ“ CombatSystem - Large battle performance
âœ“ CameraSystem - Following performance
âœ“ CameraSystem - Bounds checking performance
âœ“ Memory Leak - Entity lifecycle
âœ“ Memory Leak - System references
âœ— Scalability - Linear scaling
  Error: Error: Performance should scale linearly. Expected: <= 2, Actual: Infinity
âœ“ Scalability - Query performance

Performance Test Results: 11 passed, 2 failed
Running Accessibility Tests...

âœ“ Screen Reader - Text-to-speech initialization
âœ“ Screen Reader - Speech synthesis support
âœ“ Screen Reader - Speech announcements
âœ“ Visual Accessibility - High contrast mode
âœ“ Visual Accessibility - Large text mode
âœ“ Visual Accessibility - Color blind filters
âœ“ Visual Accessibility - Reduced motion
âœ“ Keyboard Navigation - Focus management
âœ“ Keyboard Navigation - Arrow key handling
âœ“ Keyboard Navigation - Tab order
âœ“ Focus Trap - Creation
âœ“ Focus Trap - Focus management
âœ“ Focus Trap - Release
âœ“ Input Assistance - Button holding
âœ“ Input Assistance - Rapid fire
âœ“ Input Assistance - Stick sensitivity
âœ“ Audio Visual Indicators - Damage indicators
âœ“ Audio Visual Indicators - Heal indicators
âœ“ Audio Visual Indicators - Level up indicators
âœ“ Subtitle System - Display subtitles
âœ“ Subtitle System - Subtitle sizing
âœ“ Subtitle System - Auto-hide functionality
âœ“ Settings Persistence - Save settings
âœ“ Settings Persistence - Load settings

Accessibility Test Results: 24 passed, 0 failed
ðŸ§ª Aetherial Vanguard - Unified Test Runner
==================================================

ðŸ”§ Running Engine Tests...
Running Engine Tests...

âœ“ WorldManager - Create entity
âœ“ WorldManager - Add component
âœ“ WorldManager - Query entities
âœ“ WorldManager - Remove component
âœ“ WorldManager - Destroy entity
âœ“ WorldManager - Component subscription
âœ“ GameLoop - Initialization
âœ“ GameLoop - Start and stop
âœ“ GameLoop - Pause functionality
âœ— GlobalLogger - Basic logging
  Error: Error: Console should be called when logging
[2025-12-01T02:38:55.025Z] [WARN] [CORE] Warning message 
âœ“ GlobalLogger - Log levels
âœ“ GlobalLogger - Configuration
[2025-12-01T02:38:55.025Z] [WARN] [UI] Warning message 
[2025-12-01T02:38:55.025Z] [ERROR] [RENDERER] Error message 
âœ— GlobalLogger - Log statistics
  Error: Error: Should have 3 total log entries. Expected: 3, Actual: 2
âœ“ Integration - World and Game Loop
âœ— Integration - Logger and World
  Error: Error: World operations should be logged

Test Results: 25 passed, 5 failed
âœ… Engine Tests completed in 1.00ms
   ðŸ“Š Results: 25 passed, 5 failed

ðŸ”§ Running Utility Tests...
Running Utility Tests...

âœ“ RNG - Basic functionality
âœ“ RNG - Seeded reproducibility
âœ“ RNG - Random integer
âœ“ RNG - Random choice
âœ“ rollDice - Standard dice
âœ“ rollPercent - Percentage chance
âœ— weightedRandom - Weighted selection
  Error: Error: Rare items should be less common than common items
âœ“ MathUtils - Clamp
âœ“ MathUtils - Lerp
âœ“ MathUtils - Distance
âœ“ MathUtils - Point in rect
âœ“ Vector2Utils - Basic operations
âœ“ Vector2Utils - Magnitude and normalization
âœ“ Vector2Utils - Distance
âœ“ Pathfinding - Simple path
âœ“ Pathfinding - No path
âœ“ SimplePathfinding - Straight path
âœ“ ValidationUtils - Basic validation
âœ“ ItemValidator - Valid item
âœ“ ItemValidator - Invalid item
âœ“ EnemyValidator - Valid enemy
âœ“ EnemyValidator - Invalid enemy

Test Results: 42 passed, 2 failed
âœ… Utility Tests completed in 6.00ms
   ðŸ“Š Results: 42 passed, 2 failed

ðŸ”§ Running Save System Tests...
Running Save System Tests...

âœ“ SaveSystem - Initialization
âœ“ SaveSystem - World manager assignment
[2025-12-01T02:38:55.031Z] [WARN] [CORE] Invalid player data in save file 
[2025-12-01T02:38:55.031Z] [ERROR] [CORE] Save data validation failed 
âœ— SaveSystem - Save game to slot
  Error: Error: Save should succeed
[2025-12-01T02:38:55.031Z] [ERROR] [CORE] Invalid save slot: 11 
âœ“ SaveSystem - Save to invalid slot
[2025-12-01T02:38:55.031Z] [ERROR] [CORE] World manager not set for save operation 
âœ“ SaveSystem - Save without world
[2025-12-01T02:38:55.032Z] [WARN] [CORE] Invalid player data in save file 
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Save data validation failed 
âœ— SaveSystem - Load game from slot
  Error: Error: Save should succeed
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Invalid save slot: 11 
âœ“ SaveSystem - Load from invalid slot
[2025-12-01T02:38:55.032Z] [WARN] [CORE] No save data found in slot 9 
âœ“ SaveSystem - Load non-existent save
âœ“ SaveSystem - Get save slots
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Check save exists
  Error: Error: Slot 3 should exist after save
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Delete save
  Error: Error: Slot 5 should exist after save
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Invalid save slot: 11 
âœ“ SaveSystem - Delete from invalid slot
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Auto-save
  Error: Error: Auto-save should succeed
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
[2025-12-01T02:38:55.032Z] [WARN] [CORE] No save data to export in slot 6 
âœ— SaveSystem - Export save
  Error: Error: Export should succeed
âœ“ SaveSystem - Import save
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— SaveSystem - Validate save data structure
  Error: Error: Save with complete data should succeed
[2025-12-01T02:38:55.032Z] [WARN] [CORE] No save data found in slot 1 
âœ“ SaveSystem - Handle corrupted save data
[2025-12-01T02:38:55.032Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ“ SaveSystem - Handle storage quota exceeded
[2025-12-01T02:38:55.032Z] [WARN] [CORE] No save data found in slot 1 
âœ— SaveSystem - Version migration
  Error: Error: Migration should succeed

Save System Test Results: 22 passed, 16 failed
âœ… Save System Tests completed in 2.00ms
   ðŸ“Š Results: 22 passed, 16 failed

ðŸ”§ Running Camera System Tests...
Running Camera System Tests...

âœ“ CameraSystem - Initialization
âœ“ CameraSystem - World manager assignment
âœ“ CameraSystem - Viewport setup
âœ— CameraSystem - Instant follow mode
  Error: Error: Instant follow should immediately match target X. Expected: 100, Actual: 400
âœ— CameraSystem - Smooth follow mode
  Error: Error: Smooth follow should move toward target X
âœ“ CameraSystem - Lookahead follow mode
âœ— CameraSystem - Elastic follow mode
  Error: Error: Elastic follow should show spring behavior
âœ“ CameraSystem - Dead zone
âœ“ CameraSystem - Set boundaries
âœ— CameraSystem - Enforce boundaries
  Error: Error: X should be clamped to minimum boundary. Expected: 100, Actual: 500
âœ— CameraSystem - Disable boundaries
  Error: Error: Position should not be clamped when boundaries disabled. Expected: 10000, Actual: 0
âœ— CameraSystem - World to screen coordinates
  Error: Error: World X should map to screen X correctly. Expected: 500, Actual: 0
âœ— CameraSystem - Screen to world coordinates
  Error: Error: Screen X should map to world X correctly. Expected: 500, Actual: 0
âœ— CameraSystem - Coordinate conversion with zoom
  Error: Error: World X should be scaled by zoom. Expected: 600, Actual: 0
âœ— CameraSystem - Point visibility
  Error: Error: Center point should be visible
âœ— CameraSystem - Visibility with margin
  Error: Error: Point just outside should be visible with margin
âœ— CameraSystem - Camera shake
  Error: Error: Position should return to original after shake. Expected: 400, Actual: 0
âœ— CameraSystem - Camera transition
  Error: Error: X should be between start and end
âœ— CameraSystem - Zoom limits
  Error: Error: Zoom should be clamped to minimum. Expected: 0.1, Actual: 1
âœ— CameraSystem - Get camera bounds
  Error: Error: Bounds width should match viewport. Expected: 800, Actual: 0
âœ— CameraSystem - Bounds with zoom
  Error: Error: Bounds width should be viewport divided by zoom. Expected: 400, Actual: 0
âœ— CameraSystem - Reset camera
  Error: Error: X should reset to viewport center. Expected: 400, Actual: 0

Camera System Test Results: 12 passed, 32 failed
âœ… Camera System Tests completed in 0.00ms
   ðŸ“Š Results: 12 passed, 32 failed

ðŸ”§ Running Interaction System Tests...
Running Interaction System Tests...

âœ“ InteractionSystem - Initialization
âœ“ InteractionSystem - World manager assignment
âœ“ InteractionSystem - Player assignment
âœ“ InteractionSystem - Create interactive entity
âœ“ InteractionSystem - Always condition
âœ“ InteractionSystem - Item requirement condition
âœ“ InteractionSystem - Story flag condition
âœ“ InteractionSystem - Level requirement condition
âœ— InteractionSystem - Negated conditions
  Error: Error: Negated condition should pass when item not present
âœ“ InteractionSystem - Range multiplier
âœ“ InteractionSystem - Priority calculation
âœ“ InteractionSystem - Single use interactions
âœ— InteractionSystem - Inventory management
  Error: Error: Should still have one item
âœ“ InteractionSystem - Story flag management
âœ“ InteractionSystem - Player level management
âœ“ InteractionSystem - Interaction execution

Interaction System Test Results: 28 passed, 4 failed
âœ… Interaction System Tests completed in 1.00ms
   ðŸ“Š Results: 28 passed, 4 failed

ðŸ”§ Running Accessibility System Tests...
Running Accessibility System Tests...

âœ“ AccessibilitySystem - Initialization
âœ“ AccessibilitySystem - Default options
âœ“ AccessibilitySystem - Update options
âœ“ AccessibilitySystem - Screen reader enable/disable
âœ“ AccessibilitySystem - Text-to-speech
âœ“ AccessibilitySystem - Show subtitles
âœ“ AccessibilitySystem - Subtitle size
âœ“ AccessibilitySystem - Audio visual indicators
âœ“ AccessibilitySystem - Color blind modes
âœ“ AccessibilitySystem - High contrast mode
âœ“ AccessibilitySystem - Large text mode
âœ“ AccessibilitySystem - Reduced motion
âœ“ AccessibilitySystem - Input assistance
âœ“ AccessibilitySystem - Input processing
âœ“ AccessibilitySystem - Keyboard navigation
âœ“ AccessibilitySystem - Focus trap
âœ“ AccessibilitySystem - Settings persistence

Accessibility System Test Results: 34 passed, 0 failed
âœ… Accessibility System Tests completed in 0.00ms
   ðŸ“Š Results: 34 passed, 0 failed

ðŸ”§ Running Debug Tools System Tests...
Running Debug Tools System Tests...

âœ“ DebugToolsSystem - Initialization
âœ“ DebugToolsSystem - World manager assignment
âœ“ DebugToolsSystem - Player assignment
âœ— DebugToolsSystem - Default configuration
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ“ DebugToolsSystem - Update configuration
âœ— DebugToolsSystem - Toggle features
  Error: Error: Hitboxes should be toggled on initially
âœ— DebugToolsSystem - Spawn entity
  Error: Error: Spawned entity should exist in world
âœ— DebugToolsSystem - Spawn invalid entity
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Warp to location
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Warp to invalid location
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Inspect entity
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Inspect invalid entity
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Help command
  Error: ReferenceError: debugTools is not defined
âœ— DebugToolsSystem - Spawn command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Warp command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Heal command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Give command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Clear command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Reset command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Invalid command
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Performance metrics update
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Overlay position
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Spawn entities initialization
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Warp locations initialization
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ— DebugToolsSystem - Debug canvas creation
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ“ DebugToolsSystem - Keyboard shortcuts setup

Debug Tools System Test Results: 10 passed, 42 failed
âœ… Debug Tools System Tests completed in 1.00ms
   ðŸ“Š Results: 10 passed, 42 failed

ðŸ”§ Running Component Tests...
Running Component Tests...

Rendering component with test-id: default
âœ— Game Component - Renders without crashing
  Error: Error: Element with test-id "game" should exist
Rendering component with test-id: default
âœ— Game Component - Has correct accessibility attributes
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
âœ— Game Component - Handles keyboard events
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
âœ— Game Component - Responsive design
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
âœ— HUD Component - Renders health display
  Error: Error: Element with test-id "hud" should exist
Rendering component with test-id: default
âœ— HUD Component - Updates when health changes
  Error: Error: Element with test-id "hud" not found
Rendering component with test-id: default
âœ— HUD Component - Shows debug info when enabled
  Error: Error: Element with test-id "hud" not found
Rendering component with test-id: default
âœ— HUD Component - Accessibility compliance
  Error: Error: Element with test-id "hud" not found
Rendering component with test-id: default
âœ— Dialog System - Renders dialog text
  Error: Error: Element with test-id "dialog" should exist
Rendering component with test-id: default
âœ— Dialog System - Handles dialog navigation
  Error: Error: Element with test-id "dialog" not found
Rendering component with test-id: default
âœ— Dialog System - Supports auto-advance
  Error: Error: Element with test-id "dialog" not found
Rendering component with test-id: default
âœ— Dialog System - Accessibility features
  Error: Error: Element with test-id "dialog" not found
Rendering component with test-id: default
âœ— Menu System - Renders menu items
  Error: Error: Element with test-id "menu" should exist
Rendering component with test-id: default
âœ— Menu System - Handles menu navigation
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
âœ— Menu System - Supports mouse/touch interaction
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
âœ— Menu System - Keyboard accessibility
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
âœ— Inventory System - Displays items
  Error: Error: Element with test-id "inventory" should exist
Rendering component with test-id: default
âœ— Inventory System - Handles item selection
  Error: Error: Element with test-id "inventory" not found
Rendering component with test-id: default
âœ— Inventory System - Supports item management
  Error: Error: Element with test-id "inventory" not found
Rendering component with test-id: default
âœ— Inventory System - Accessibility compliance
  Error: Error: Element with test-id "inventory" not found
Rendering component with test-id: default
âœ— Combat UI - Renders combat interface
  Error: Error: Element with test-id "combat" should exist
Rendering component with test-id: default
âœ— Combat UI - Displays participant information
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ— Combat UI - Handles action selection
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ— Combat UI - Shows combat log
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ— Combat UI - Accessibility features
  Error: Error: Element with test-id "combat" not found
Rendering component with test-id: default
âœ“ Error Boundary - Catches component errors
Rendering component with test-id: default
âœ“ Error Boundary - Shows error message
Rendering component with test-id: default
âœ“ Error Boundary - Provides fallback UI
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Responsive Design - Mobile viewport
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Responsive Design - Tablet viewport
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Responsive Design - Desktop viewport
Rendering component with test-id: default
Rendering component with test-id: default
Rendering component with test-id: default
âœ— Accessibility - Screen reader support
  Error: Error: Element with test-id "game" not found
Rendering component with test-id: default
Rendering component with test-id: default
âœ— Accessibility - Keyboard navigation
  Error: Error: Element with test-id "menu" not found
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Accessibility - High contrast mode
Rendering component with test-id: default
Rendering component with test-id: default
âœ“ Accessibility - Reduced motion

Component Test Results: 16 passed, 54 failed
âœ… Component Tests completed in 3.00ms
   ðŸ“Š Results: 16 passed, 54 failed

ðŸ”§ Running Integration Tests...
Running Integration Tests...

âœ… Integration Tests completed in 0.00ms
   ðŸ“Š Results: undefined passed, undefined failed

ðŸ”§ Running Performance Tests...
Running Performance Tests...

âœ“ WorldManager - Entity creation performance
âœ— WorldManager - Component addition performance
  Error: ReferenceError: i is not defined
âœ“ WorldManager - Query performance
âœ“ WorldManager - Memory efficiency
âœ“ GameLoop - High FPS performance
âœ“ GameLoop - Delta time accuracy
âœ“ CombatSystem - Large battle performance
âœ“ CameraSystem - Following performance
âœ“ CameraSystem - Bounds checking performance
âœ“ Memory Leak - Entity lifecycle
âœ“ Memory Leak - System references
âœ— Scalability - Linear scaling
  Error: Error: Performance should scale linearly. Expected: <= 2, Actual: Infinity
âœ“ Scalability - Query performance

Performance Test Results: 22 passed, 4 failed
âœ… Performance Tests completed in 16.00ms
   ðŸ“Š Results: 22 passed, 4 failed

ðŸ”§ Running Accessibility Compliance Tests...
Running Accessibility Tests...

âœ“ Screen Reader - Text-to-speech initialization
âœ“ Screen Reader - Speech synthesis support
âœ“ Screen Reader - Speech announcements
âœ“ Visual Accessibility - High contrast mode
âœ“ Visual Accessibility - Large text mode
âœ“ Visual Accessibility - Color blind filters
âœ“ Visual Accessibility - Reduced motion
âœ“ Keyboard Navigation - Focus management
âœ“ Keyboard Navigation - Arrow key handling
âœ“ Keyboard Navigation - Tab order
âœ“ Focus Trap - Creation
âœ“ Focus Trap - Focus management
âœ“ Focus Trap - Release
âœ“ Input Assistance - Button holding
âœ“ Input Assistance - Rapid fire
âœ“ Input Assistance - Stick sensitivity
âœ“ Audio Visual Indicators - Damage indicators
âœ“ Audio Visual Indicators - Heal indicators
âœ“ Audio Visual Indicators - Level up indicators
âœ“ Subtitle System - Display subtitles
âœ“ Subtitle System - Subtitle sizing
âœ“ Subtitle System - Auto-hide functionality
âœ“ Settings Persistence - Save settings
âœ“ Settings Persistence - Load settings

Accessibility Test Results: 48 passed, 0 failed
âœ… Accessibility Compliance Tests completed in 4.00ms
   ðŸ“Š Results: 48 passed, 0 failed

ðŸ“Š COMPREHENSIVE TEST REPORT
==================================================

â±ï¸  Total Duration: 35.00ms
ðŸ“ˆ Total Tests: NaN
âœ… Passed: NaN
âŒ Failed: NaN
ðŸ“Š Success Rate: 0%

ðŸ“‹ Results by Category:
-------------------
Core Engine: 30 tests (25 passed, 5 failed) - 83.3%
Utilities: 44 tests (42 passed, 2 failed) - 95.5%
Game Systems: 200 tests (106 passed, 94 failed) - 53.0%
UI Components: 70 tests (16 passed, 54 failed) - 22.9%
Integration: NaN tests (NaN passed, NaN failed) - 0%
Performance: 26 tests (22 passed, 4 failed) - 84.6%
Accessibility: 48 tests (48 passed, 0 failed) - 100.0%

ðŸ“‹ Individual Suite Results:
-----------------------------
âŒ Engine Tests: 30 tests (83.3%) - 1.00ms
âŒ Utility Tests: 44 tests (95.5%) - 6.00ms
âŒ Save System Tests: 38 tests (57.9%) - 2.00ms
âŒ Camera System Tests: 44 tests (27.3%) - 0.00ms
âŒ Interaction System Tests: 32 tests (87.5%) - 1.00ms
âœ… Accessibility System Tests: 34 tests (100.0%) - 0.00ms
âŒ Debug Tools System Tests: 52 tests (19.2%) - 1.00ms
âŒ Component Tests: 70 tests (22.9%) - 3.00ms
âŒ Integration Tests: NaN tests (0%) - 0.00ms
âŒ Performance Tests: 26 tests (84.6%) - 16.00ms
âœ… Accessibility Compliance Tests: 48 tests (100.0%) - 4.00ms

âš¡ Performance Analysis:
---------------------
Average performance test duration: 16.00ms
Slowest performance test: Performance Tests (16.00ms)
Average system test duration: 0.80ms

ðŸ’¡ Recommendations:
-----------------

ðŸŽ¯ Test execution completed!
==================================================
âœ“ Integration - World and Game Loop
âœ“ Integration - World and Combat System
âœ“ Integration - World and Camera System
âœ— Integration - World and Interaction System
  Error: Error: Should find 1 available interaction. Expected: 1, Actual: 0
[2025-12-01T02:38:55.085Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— Integration - World and Save System
  Error: Error: Save should succeed
âœ“ Integration - World and Game Loop
âœ“ Integration - World and Combat System
âœ“ Integration - World and Camera System
âœ— Integration - World and Interaction System
  Error: Error: Should find 1 available interaction. Expected: 1, Actual: 0
[2025-12-01T02:38:55.139Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— Integration - World and Save System
  Error: Error: Save should succeed
âœ“ Integration - Performance under load
âœ“ Integration - Memory usage
âœ“ Integration - Accessibility with all systems
âœ— Integration - Debug tools with all systems
  Error: TypeError: this.debugCanvas.getContext is not a function
âœ“ Integration - Performance under load
âœ“ Integration - Memory usage
âœ“ Integration - Accessibility with all systems
âœ— Integration - Debug tools with all systems
  Error: TypeError: this.debugCanvas.getContext is not a function
[2025-12-01T02:38:55.353Z] [ERROR] [CORE] Render function failed: Error: Random render error 
âœ“ Integration - Error handling across systems
âœ“ Integration - System recovery after errors
âœ“ Integration - Error handling across systems
âœ“ Integration - System recovery after errors
âœ“ Integration - Cross-platform compatibility
[2025-12-01T02:38:55.536Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— Integration - Data consistency across systems
  Error: Error: Save should succeed

Integration Test Results: 17 passed, 7 failed
Integration tests completed. Passed: 17, Failed: 7
âœ“ Integration - Cross-platform compatibility
[2025-12-01T02:38:55.590Z] [ERROR] [CORE] Failed to save game: Error: Player entity not found. Query returned: [] 
âœ— Integration - Data consistency across systems
  Error: Error: Save should succeed

Integration Test Results: 18 passed, 8 failed
